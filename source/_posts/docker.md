---
uuid: 9
title: docker
categories:
- 项目扩展
tags:
- ci持续集成
---

### 什么是docker
应用容器、平台，可将应用打包到轻量化、可移植的容器中运行实现虚拟化。
容器是完全使用沙箱机制，相互之间不会有任何接口，容器性能开销极低。
优点：将应用程序和基础架构分开，从而快速交付软件，借助docker可以像管理应用程序一样管理基础架构，同样利用docker的方法来快速交付，测试和部署代码，减少编写代码到代码在生产环境中运行的时间延迟。

### 应用场景
1. web应用自动化打包发布。
2. 自动化测试和持续集成、发布。
3. 共享镜像。

### docker架构
镜像image：相当于root系统文件。
容器container：是镜像的运行时实体，通过镜像来创建，可以被创建、停止、删除、暂停。
仓库repository：代码控制中心，用来保存镜像。
容器和镜像关系类似于面向编程中的对象和类。
当容器被移除时任何未存储在持久存储中的状态更改都会消失。

### 使用

**容器使用**
启用：docker run 镜像name /bin/echo 'hello' ，`/bin/echo 'hello' 在容器里执行的命令`， `docker run 镜像name 从本机查找是否有该镜像，没有就从仓库中下载公共镜像`
查看容器是否运行：docker ps
启动一个已停止的容器： docker start xx（id）
后台运行参数：-d
将容器内部使用的网络端口映射到我们使用的主机上参数： -p， Eg：-p 8081:80801 将8080端口映射到8081访问；

**镜像使用**
镜像下载：[https://hub.docker.com/](https://hub.docker.com/)
查看镜像：docker image
docker镜像由一些松耦合的只读镜像层组成。

### Dockerfile
用来构建镜像的文本文件，包含构建镜像所需指令和说明。
作用：
    对当前应用的描述
    指导Docker完成应用的容器化

### 应用容器化
>将应用整合到容器中并运行起来的这一过程称为容器化。

步骤：
    1. 编写app应用代码
    2. 创建Dockerfile文件，包含对当前应用所需指令和描述说明
    3. 对Dockerfile执行docker image build命令
    4. 等待Docker将应用程序构建到Docker镜像中
    5. 打包完成作为容器或服务运行

### Swarm集群
>将一个或多个Docker节点组织起来，用集群的方式管理。

















